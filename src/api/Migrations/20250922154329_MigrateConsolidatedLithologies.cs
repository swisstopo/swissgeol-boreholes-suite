using Microsoft.EntityFrameworkCore.Migrations;

#nullable disable

namespace BDMS.Migrations;
#pragma warning disable CA1505

/// <inheritdoc />
public partial class MigrateConsolidatedLithologies : Migration
{
    /// <inheritdoc />
    protected override void Up(MigrationBuilder migrationBuilder)
    {
        migrationBuilder.Sql(@"
            INSERT INTO bdms.lithology (
                id,
                stratigraphy_id,
                creation,
                creator,
                update,
                updater,
                depth_from,
                depth_to,
                unconsolidated,
                notes
            )
            SELECT
                id_lay,
                id_sty_fk,
                creation_lay,
                creator_lay,
                update_lay,
                updater_lay,
                depth_from_lay,
                depth_to_lay,
                FALSE,
                notes_lay
            FROM bdms.layer
            WHERE id_sty_fk IN (SELECT id FROM bdms.stratigraphy_v2) AND id_lay NOT IN (SELECT id FROM bdms.lithology) AND depth_from_lay IS NOT NULL AND depth_to_lay IS NOT NULL;

            INSERT INTO bdms.lithology_description (lithology_id)
            SELECT id
            FROM bdms.lithology
            WHERE id NOT IN (
              SELECT lithology_id FROM bdms.lithology_description
            );

            UPDATE bdms.lithology_description
            SET
                lithology_con_id = l.lithology_id_cli,
                grain_size_id = l.grain_size_1_id_cli,
                gradation_id = l.gradation_id_cli
            FROM bdms.layer l
            WHERE bdms.lithology_description.lithology_id = l.id_lay AND id_lay IN (SELECT id FROM bdms.lithology WHERE unconsolidated IS FALSE);

            UPDATE bdms.lithology_description
            SET grain_angularity_id = lgac.grain_angularity_id
            FROM bdms.layer_grain_angularity_codelist lgac
            WHERE bdms.lithology_description.lithology_id = lgac.layer_id AND lgac.layer_id IN (SELECT id FROM bdms.lithology WHERE unconsolidated IS FALSE);

            INSERT INTO bdms.lithology_description_structure_post_gen_codelist (lithology_description_id, lithology_structure_post_gen_id)
            SELECT ld.id, v.id_cli
            FROM (
                VALUES
				(293361,100000445),
				(304010,100000445),
				(6495,100000445),
				(238029,100000427),
				(293228,100000446),
				(292411,100000446),
				(292506,100000446),
				(292517,100000446),
				(243915,100000446),
				(292424,100000446),
				(292459,100000446),
				(292528,100000446),
				(292653,100000446),
				(298840,100000446),
				(292423,100000446),
				(292429,100000446),
				(293230,100000446),
				(281873,100000445),
				(260810,100000445),
				(225209,100000445),
				(260814,100000445),
				(302305,100000445),
				(291955,100000445),
				(292407,100000446),
				(293170,100000445),
				(292134,100000445),
				(302634,100000445),
				(251888,100000445),
				(306125,100000445),
				(215344,100000445),
				(305901,100000445),
				(291956,100000445),
				(292135,100000445),
				(260832,100000445),
				(292473,100000446),
				(293351,100000445),
				(306124,100000445),
				(224329,100000445),
				(224914,100000445),
				(293352,100000445),
				(306126,100000445),
				(292860,100000445),
				(281460,100000445),
				(215820,100000445),
				(215337,100000445),
				(215343,100000445),
				(293018,100000445),
				(292136,100000445),
				(293189,100000445),
				(293190,100000445),
				(243964,100000445),
				(302632,100000445),
				(304008,100000445),
				(292137,100000445),
				(293185,100000445),
				(299434,100000445),
				(292359,100000445),
				(274247,100000445),
				(293362,100000445),
				(274269,100000445),
				(261224,100000445),
				(274248,100000445),
				(293349,100000445),
				(261223,100000445),
				(213211,100000445),
				(291953,100000445),
				(293350,100000445),
				(243966,100000445),
				(284509,100000445),
				(303851,100000445),
				(292295,100000445),
				(304005,100000445),
				(306128,100000446),
				(306068,100000445),
				(291960,100000445),
				(303990,100000445),
				(292168,100000445),
				(293186,100000445),
				(292296,100000445),
				(292298,100000445),
				(293193,100000445),
				(292299,100000445),
				(274264,100000445),
				(222145,100000445),
				(292300,100000445),
				(292301,100000445),
				(292303,100000445),
				(306120,100000445),
				(306127,100000445),
				(293370,100000445),
				(238695,100000445),
				(292139,100000445),
				(293364,100000445),
				(293178,100000445),
				(293194,100000445),
				(286228,100000445),
				(219939,100000445),
				(293373,100000445),
				(293360,100000445),
				(292360,100000445),
				(303832,100000445),
				(293195,100000445),
				(291957,100000445),
				(298881,100000445),
				(260811,100000445),
				(304015,100000445),
				(306064,100000445),
				(292962,100000445),
				(293366,100000445),
				(293197,100000445),
				(260812,100000445),
				(292132,100000446),
				(293355,100000445),
				(292527,100000446),
				(223947,100000427),
				(260809,100000445),
				(292138,100000445),
				(292485,100000446),
				(224521,100000445),
				(303986,100000446),
				(292972,100000445),
				(293179,100000445),
				(286226,100000445),
				(223748,100000445),
				(235168,100000445),
				(294057,100000445),
				(274250,100000445),
				(219191,100000445),
				(293356,100000445),
				(219659,100000445),
				(284536,100000445),
				(293198,100000445),
				(222571,100000445),
				(224413,100000445),
				(292486,100000446),
				(260815,100000445),
				(260833,100000445),
				(284549,100000445),
				(297934,100000445),
				(293191,100000445),
				(304009,100000445),
				(292487,100000446),
				(293343,100000445),
				(304016,100000445),
				(293174,100000446),
				(293333,100000446),
				(303983,100000446),
				(292361,100000445),
				(260813,100000445),
				(294058,100000445),
				(297921,100000446),
				(219352,100000445),
				(303997,100000446),
				(286227,100000445),
				(260835,100000445),
				(292402,100000446),
				(292133,100000446),
				(302630,100000446),
				(293357,100000445),
				(215338,100000445),
				(269483,100000445),
				(298883,100000445),
				(292167,100000446),
				(215197,100000445),
				(293358,100000445),
				(292482,100000446),
				(219441,100000445),
				(258430,100000445),
				(224314,100000445),
				(286975,100000445),
				(292960,100000446),
				(293432,100000445),
				(304017,100000445),
				(303982,100000446),
				(225519,100000445),
				(292403,100000446),
				(297926,100000445),
				(294059,100000445),
				(292427,100000446),
				(281461,100000445),
				(304011,100000445),
				(221577,100000445),
				(298878,100000446),
				(292963,100000445),
				(260834,100000445),
				(293353,100000445),
				(292343,100000445),
				(293182,100000445),
				(260185,100000445),
				(274274,100000446),
				(224414,100000445),
				(215339,100000444),
				(306130,100000445),
				(304013,100000445),
				(216663,100000446),
				(292489,100000446),
				(292707,100000445),
				(304000,100000445),
				(293180,100000445),
				(292490,100000446),
				(304001,100000445),
				(261225,100000445),
				(220487,100000446),
				(267956,100000445),
				(292458,100000446),
				(261440,100000445),
				(272038,100000445),
				(304018,100000445),
				(294048,100000445),
				(304012,100000445),
				(260403,100000444),
				(260808,100000445),
				(313342,100000445),
				(292414,100000446),
				(224415,100000445),
				(293334,100000446),
				(293183,100000445),
				(297918,100000445),
				(292404,100000446),
				(292508,100000446),
				(221617,100000444),
				(293344,100000445),
				(281458,100000446),
				(223766,100000445),
				(292452,100000446),
				(294053,100000445),
				(292434,100000446),
				(223672,100000446),
				(293335,100000446),
				(292447,100000446),
				(292293,100000445),
				(294051,100000445),
				(292492,100000446),
				(292964,100000445),
				(292292,100000446),
				(293175,100000445),
				(303991,100000446),
				(292965,100000445),
				(269315,100000446),
				(293345,100000445),
				(292140,100000445),
				(301508,100000445),
				(243909,100000446),
				(292453,100000446),
				(292405,100000446),
				(292961,100000446),
				(293337,100000445),
				(293338,100000445),
				(292859,100000445),
				(292435,100000446),
				(292454,100000446),
				(291928,100000445),
				(293426,100000446),
				(274245,100000445),
				(294055,100000445),
				(293192,100000445),
				(292455,100000446),
				(303999,100000446),
				(217183,100000446),
				(292678,100000445),
				(292448,100000446),
				(301538,100000446),
				(260967,100000445),
				(297931,100000445),
				(292495,100000446),
				(293177,100000445),
				(292400,100000446),
				(224411,100000445),
				(292450,100000446),
				(297917,100000445),
				(293184,100000445),
				(292969,100000445),
				(293708,100000445),
				(292513,100000446),
				(292294,100000445),
				(293176,100000445),
				(293340,100000445),
				(292440,100000446),
				(303996,100000446),
				(292382,100000446),
				(292970,100000445),
				(292432,100000446),
				(291952,100000445),
				(301511,100000445),
				(293710,100000445),
				(301492,100000446),
				(223512,100000445),
				(220594,100000445),
				(217291,100000446),
				(225517,100000445),
				(304004,100000445),
				(283877,100000446),
				(293187,100000445),
				(299707,100000446),
				(292456,100000446),
				(219674,100000446),
				(306054,100000445),
				(302628,100000446),
				(292497,100000446),
				(292509,100000446),
				(292441,100000446),
				(291985,100000445),
				(292412,100000446),
				(292415,100000446),
				(292433,100000446),
				(292442,100000446),
				(292386,100000446),
				(223819,100000446),
				(292510,100000446),
				(292552,100000446),
				(223749,100000427),
				(292498,100000446),
				(292511,100000446),
				(284007,100000446),
				(292499,100000446),
				(292553,100000446),
				(288354,100000446),
				(223794,100000446),
				(303988,100000446),
				(292443,100000446),
				(292460,100000446),
				(292484,100000446),
				(292419,100000446),
				(292500,100000446),
				(292451,100000446),
				(292444,100000446),
				(288445,100000446),
				(217292,100000446),
				(224327,100000445),
				(301497,100000446),
				(292445,100000446),
				(303850,100000446),
				(293229,100000446),
				(297922,100000446),
				(292501,100000446),
				(288806,100000446),
				(301491,100000446),
				(292397,100000446),
				(223795,100000446),
				(292654,100000446),
				(292387,100000446),
				(292502,100000446),
				(292370,100000446),
				(292409,100000446),
				(292461,100000446),
				(292462,100000446),
				(292504,100000446),
				(292505,100000446),
				(292430,100000446),
				(292410,100000446),
				(292476,100000446),
				(292465,100000446),
				(292477,100000446),
				(217290,100000446),
				(292478,100000446),
				(292631,100000446),
				(243913,100000446),
				(299708,100000446),
				(293232,100000446),
				(292525,100000446),
				(292383,100000446),
				(292526,100000446),
				(269316,100000446),
				(292479,100000446),
				(292366,100000446),
				(292507,100000446),
				(292480,100000446),
				(292384,100000446),
				(299706,100000446),
				(292425,100000446),
				(299705,100000446),
				(292514,100000446),
				(292408,100000446),
				(292431,100000446),
				(292515,100000446),
				(292417,100000446),
				(303993,100000446),
				(292463,100000446),
				(292516,100000446),
				(223796,100000446),
				(292468,100000446),
				(292470,100000446),
				(292472,100000446),
				(292474,100000446),
				(223800,100000446),
				(292318,100000444),
				(292319,100000444),
				(292320,100000444),
				(293332,100000446),
				(292316,100000444),
				(219516,100000445),
				(292304,100000445),
				(304007,100000445),
				(292703,100000427),
				(297928,100000446),
				(293365,100000445),
				(292488,100000446),
				(243899,100000445),
				(306123,100000446),
				(213706,100000427),
				(301482,100000444),
				(292321,100000444),
				(246548,100000427),
				(292464,100000446),
				(292317,100000444),
				(292457,100000446),
				(292420,100000446),
				(292413,100000446),
				(292493,100000446),
				(292481,100000446),
				(292311,100000444),
				(292314,100000444),
				(250954,100000445),
				(269481,100000445),
				(292310,100000444),
				(292307,100000444),
				(260821,100000445),
				(292306,100000444),
				(292297,100000444),
				(292308,100000444),
				(293354,100000445),
				(293705,100000445),
				(293431,100000445),
				(293339,100000445),
				(293196,100000445),
				(270021,100000445),
				(293430,100000445),
				(306092,100000445),
				(274744,100000446),
				(292385,100000446),
				(292398,100000446),
				(291984,100000445),
				(270172,100000445),
				(293341,100000445),
				(214006,100000445),
				(213281,100000445),
				(293434,100000427),
				(293433,100000427),
				(293359,100000445),
				(235146,100000445),
				(304019,100000427),
				(292312,100000444),
				(292309,100000444),
				(262897,100000445),
				(304002,100000427),
				(243907,100000446),
				(301512,100000445),
				(292313,100000444),
				(292126,100000444),
				(293181,100000445),
				(293435,100000427),
				(292491,100000446),
				(223829,100000446),
				(292406,100000446),
				(292966,100000445),
				(225361,100000446),
				(301537,100000446),
				(292426,100000446),
				(292438,100000446),
				(294038,100000445),
				(302631,100000446),
				(292401,100000446),
				(292428,100000446),
				(292496,100000446),
				(293346,100000445),
				(293188,100000445),
				(223272,100000445),
				(293347,100000445),
				(243971,100000445),
				(223948,100000445),
				(306129,100000445),
				(303984,100000446),
				(292439,100000446),
				(292967,100000445),
				(301485,100000446),
				(293225,100000445),
				(301509,100000445),
				(297924,100000427),
				(281455,100000445),
				(292302,100000445),
				(243902,100000445),
				(292380,100000446),
				(258470,100000445),
				(240461,100000445),
				(215991,100000445),
				(269318,100000446),
				(224412,100000445),
				(292512,100000446),
				(303987,100000446),
				(292531,100000446),
				(292416,100000446),
				(223793,100000446),
				(292503,100000446),
				(293429,100000446),
				(292315,100000444),
				(293348,100000445),
				(293342,100000445),
				(293336,100000445)
            ) AS v(lithology_id, id_cli)
            JOIN bdms.lithology_description ld
                ON ld.lithology_id = v.lithology_id;
        ");
    }
}
#pragma warning restore CA1505
